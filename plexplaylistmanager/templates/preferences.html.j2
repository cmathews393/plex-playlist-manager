{% extends 'base.html.j2' %}

{% block content %}
<div class="container mt-4">
    <h2>Preferences Settings</h2>
    <form action="/submit-preferences" method="POST">
        <div class="mb-3">
            <label class="form-label">Plex Users to Sync</label>
            {% if plex_users %}
                {% for user in plex_users %}
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="user_{{ loop.index }}" name="plex_user_{{ user }}" role="switch"
                        {{ 'checked' if user in checked_users else '' }}>
                    <label class="form-check-label" for="user_{{ loop.index }}">{{ user }}</label>
                </div>
                {% endfor %}
            {% else %}
                <div class="alert alert-danger" role="alert">
                    Unable to load Plex users. Please check the logs and/or your API key
                </div>
            {% endif %}
        </div>

        <div class ="mb-3">
            <label class="form-label">Playlist Name</label>
            <div class="form-input" name="playlist id="playlistText">
                <input class="form-"
            </div>
        </div>
        <!-- Radio Buttons -->
        <div class="mb-3">
            <label class="form-label">Notification Preferences</label>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="notifications" id="notifyEmail" value="email" checked>
                <label class="form-check-label" for="notifyEmail">
                    Email
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="notifications" id="notifySMS" value="sms">
                <label class="form-check-label" for="notifySMS">
                    SMS
                </label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="notifications" id="notifyNone" value="none">
                <label class="form-check-label" for="notifyNone">
                    None
                </label>
            </div>
        </div>

        <!-- Checkbox styled as slider -->
        <div class="mb-3">
            <label class="form-label" for="darkModeToggle">Dark Mode</label>
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="darkModeToggle" role="switch" name="dark_mode">
                <label class="form-check-label" for="darkModeToggle">Enable</label>
            </div>
        </div>

        <!-- Submit button -->
        <button type="submit" class="btn btn-primary">Save Preferences</button>
    </form>
</div>
{% endblock %}
